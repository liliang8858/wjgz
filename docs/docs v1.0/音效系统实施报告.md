# ä¸‡å‰‘å½’å®— - éŸ³æ•ˆç³»ç»Ÿå®æ–½æŠ¥å‘Š

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

ä¸º"ä¸‡å‰‘å½’å®—"æ¸¸æˆå®æ–½äº†å®Œæ•´çš„éŸ³æ•ˆç³»ç»Ÿï¼ŒåŒ…æ‹¬èƒŒæ™¯éŸ³ä¹ã€æ¸¸æˆéŸ³æ•ˆå’Œè§¦è§‰åé¦ˆï¼Œæ—¨åœ¨é€šè¿‡å³æ—¶çš„å£°éŸ³åé¦ˆæå‡ç©å®¶çš„å¤šå·´èƒºä½“éªŒã€‚

## âœ… å®Œæˆå†…å®¹

### 1. éŸ³æ•ˆèµ„æºæ•´ç†

#### ä¸‹è½½æ¥æº
- **Pixabay**: å‰‘ç±»éŸ³æ•ˆã€åˆæˆéŸ³æ•ˆï¼ˆå…è´¹å•†ç”¨ï¼‰
- **Mixkit**: UIéŸ³æ•ˆã€ç‰¹æ•ˆéŸ³æ•ˆï¼ˆå…è´¹å•†ç”¨ï¼‰
- **Chosic**: èƒŒæ™¯éŸ³ä¹ï¼ˆå…è´¹å•†ç”¨ï¼‰

#### éŸ³æ•ˆåˆ†ç±»
ä»ä¸‹è½½çš„ 33 ä¸ªéŸ³æ•ˆæ–‡ä»¶ä¸­ï¼Œç²¾é€‰å¹¶æ•´ç†äº† 27 ä¸ªé«˜è´¨é‡éŸ³æ•ˆï¼š

| ç±»åˆ« | æ•°é‡ | å¤§å° | ç”¨é€” |
|------|------|------|------|
| èƒŒæ™¯éŸ³ä¹ | 3 | 7.0MB | æ¸¸æˆæ°›å›´è¥é€  |
| å‰‘ç±»éŸ³æ•ˆ | 4 | 0.2MB | åŸºç¡€äº¤äº’åé¦ˆ |
| åˆæˆéŸ³æ•ˆ | 4 | 2.0MB | åˆæˆåé¦ˆ |
| ç‰¹æ•ˆéŸ³æ•ˆ | 9 | 1.1MB | ç‰¹æ®Šæ•ˆæœ |
| UIéŸ³æ•ˆ | 4 | 0.5MB | ç•Œé¢äº¤äº’ |
| ç»ˆææŠ€éŸ³æ•ˆ | 3 | 0.8MB | å¤§æ‹›åé¦ˆ |
| **æ€»è®¡** | **27** | **11.5MB** | - |

### 2. ç›®å½•ç»“æ„è®¾è®¡

```
wjgz/Sounds/
â”œâ”€â”€ BGM/                    # èƒŒæ™¯éŸ³ä¹
â”‚   â”œâ”€â”€ background_main.mp3
â”‚   â”œâ”€â”€ background_epic.mp3
â”‚   â””â”€â”€ background_menu.mp3
â”œâ”€â”€ SFX/                    # éŸ³æ•ˆ
â”‚   â”œâ”€â”€ Sword/             # å‰‘ç±»éŸ³æ•ˆ (4ä¸ª)
â”‚   â”œâ”€â”€ Merge/             # åˆæˆéŸ³æ•ˆ (4ä¸ª)
â”‚   â”œâ”€â”€ Effects/           # ç‰¹æ•ˆéŸ³æ•ˆ (9ä¸ª)
â”‚   â”œâ”€â”€ UI/                # UIéŸ³æ•ˆ (4ä¸ª)
â”‚   â””â”€â”€ Ultimate/          # ç»ˆææŠ€éŸ³æ•ˆ (3ä¸ª)
â”œâ”€â”€ download/              # åŸå§‹æ–‡ä»¶å¤‡ä»½
â””â”€â”€ æ–‡æ¡£/                  # è¯´æ˜æ–‡æ¡£ (5ä¸ª)
```

### 3. SoundManager å‡çº§

#### æ–°å¢åŠŸèƒ½
- âœ… èƒŒæ™¯éŸ³ä¹æ’­æ”¾ç³»ç»Ÿï¼ˆå¾ªç¯ã€å•æ¬¡ã€æ·¡å…¥æ·¡å‡ºï¼‰
- âœ… éŸ³æ•ˆæ’­æ”¾å™¨æ± ï¼ˆæ”¯æŒå¹¶å‘æ’­æ”¾ï¼‰
- âœ… å¤šæ ¼å¼æ”¯æŒï¼ˆMP3ã€WAVã€M4Aï¼‰
- âœ… ç‹¬ç«‹éŸ³é‡æ§åˆ¶ï¼ˆBGM/SFXï¼‰
- âœ… ç³»ç»ŸéŸ³æ•ˆå¤‡ç”¨æ–¹æ¡ˆ
- âœ… è§¦è§‰åé¦ˆé›†æˆ

#### æ ¸å¿ƒ API
```swift
// èƒŒæ™¯éŸ³ä¹
playBackgroundMusic(_:loop:)
stopBackgroundMusic()
fadeOutBackgroundMusic(duration:)
fadeInBackgroundMusic(_:duration:)

// éŸ³é‡æ§åˆ¶
setMusicVolume(_:)
setSFXVolume(_:)
setEnabled(_:)

// æ¸¸æˆéŸ³æ•ˆ
playMergeFan/Ling/Xian/Shen()
playCombo(_:)
playChainClear()
playExplosion()
playUltimate()
// ... ç­‰ 20+ ä¸ªéŸ³æ•ˆæ–¹æ³•
```

### 4. æ–‡æ¡£ä½“ç³»

åˆ›å»ºäº†å®Œæ•´çš„æ–‡æ¡£ä½“ç³»ï¼š

| æ–‡æ¡£ | ç”¨é€” |
|------|------|
| éŸ³æ•ˆèµ„æºä¸‹è½½æŒ‡å—.md | éŸ³æ•ˆä¸‹è½½æ•™ç¨‹ |
| éŸ³æ•ˆæ˜ å°„è¡¨.md | éŸ³æ•ˆæ–‡ä»¶è¯¦ç»†è¯´æ˜ |
| æ·»åŠ éŸ³æ•ˆåˆ°Xcode.md | Xcodeé›†æˆæŒ‡å— |
| éŸ³æ•ˆç³»ç»Ÿå®Œæˆæ¸…å•.md | å®Œæ•´å®æ–½æ¸…å• |
| å¿«é€Ÿå‚è€ƒ.md | APIå¿«é€ŸæŸ¥è¯¢ |
| éŸ³æ•ˆç³»ç»Ÿå®æ–½æŠ¥å‘Š.md | æœ¬æ–‡æ¡£ |

## ğŸ¯ éŸ³æ•ˆè®¾è®¡ç†å¿µ

### å¤šå·´èƒºé©±åŠ¨è®¾è®¡

#### 1. å³æ—¶åé¦ˆ (0å»¶è¿Ÿ)
- æ¯ä¸ªç‚¹å‡»ã€æ‹–æ‹½ã€æ”¾ä¸‹éƒ½æœ‰éŸ³æ•ˆ
- å£°éŸ³ä¸åŠ¨ä½œå®Œå…¨åŒæ­¥
- é…åˆè§¦è§‰éœ‡åŠ¨

#### 2. å±‚æ¬¡åˆ†æ˜ (æ¸è¿›å¼å¥–åŠ±)
```
å‡¡å‰‘åˆæˆ â†’ è½»å¿«éŸ³æ•ˆ â­â­
çµå‰‘åˆæˆ â†’ æ¸…è„†éŸ³æ•ˆ â­â­â­
ä»™å‰‘åˆæˆ â†’ åä¸½éŸ³æ•ˆ â­â­â­â­
ç¥å‰‘åˆæˆ â†’ éœ‡æ’¼éŸ³æ•ˆ â­â­â­â­â­
```

#### 3. è¿å‡»å¥–åŠ± (è¶Šæ‰“è¶Šçˆ½)
```
2è¿å‡» â†’ è½»å¿«
3-4è¿å‡» â†’ æ¸…è„†
5+è¿å‡» â†’ éœ‡æ’¼
```

#### 4. ç»ˆæçˆ½æ„Ÿ (é«˜æ½®ä½“éªŒ)
ä¸‡å‰‘å½’å®—å®Œæ•´éŸ³æ•ˆåºåˆ—ï¼š
1. è“„åŠ›éŸ³æ•ˆ (0.0s)
2. 8æ¬¡å‰‘æ°”éŸ³æ•ˆ (0.0-1.2s)
3. é‡Šæ”¾éŸ³æ•ˆ (0.8s)
4. å†²å‡»éŸ³æ•ˆ (1.2s)
5. 7æ¬¡éœ‡åŠ¨åé¦ˆ (0.0-1.2s)

#### 5. æ°›å›´è¥é€  (æ²‰æµ¸æ„Ÿ)
- å²è¯—çº§èƒŒæ™¯éŸ³ä¹å¾ªç¯
- ä¸œæ–¹ä»™ä¾ é£æ ¼
- éŸ³é‡å¹³è¡¡ï¼ˆBGM 40%, SFX 70%ï¼‰

## ğŸ“Š æŠ€æœ¯å®ç°

### éŸ³æ•ˆåŠ è½½ç­–ç•¥

#### é¢„åŠ è½½æœºåˆ¶
```swift
// å¯åŠ¨æ—¶é¢„åŠ è½½å¸¸ç”¨éŸ³æ•ˆ
let commonSounds = [
    "sword_whoosh", "sword_clash", "sword_draw",
    "merge_small", "merge_medium", "merge_large", "merge_epic",
    "button_click", "success", "combo"
]
```

#### å¤šæ ¼å¼æ”¯æŒ
```swift
let extensions = ["mp3", "wav", "m4a"]
// è‡ªåŠ¨å°è¯•æ‰€æœ‰æ ¼å¼
```

#### è·¯å¾„æœç´¢
```swift
let possiblePaths = [
    "Sounds/SFX/\(name)",
    "Sounds/\(name)",
    name
]
// çµæ´»çš„æ–‡ä»¶æŸ¥æ‰¾
```

### å¹¶å‘æ’­æ”¾

#### æ’­æ”¾å™¨æ± 
```swift
private var sfxPlayers: [String: [AVAudioPlayer]] = [:]
private let maxPlayersPerSound = 3
```

- æ¯ä¸ªéŸ³æ•ˆæœ€å¤š3ä¸ªå®ä¾‹
- æ”¯æŒåŒæ—¶æ’­æ”¾å¤šä¸ªç›¸åŒéŸ³æ•ˆ
- è‡ªåŠ¨ç®¡ç†ï¼Œæ— å†…å­˜æ³„æ¼

### å¤‡ç”¨æ–¹æ¡ˆ

#### ç³»ç»ŸéŸ³æ•ˆ
```swift
private let tapSoundID: SystemSoundID = 1104
private let selectSoundID: SystemSoundID = 1105
private let successSoundID: SystemSoundID = 1054
private let errorSoundID: SystemSoundID = 1053
```

- å¦‚æœè‡ªå®šä¹‰éŸ³æ•ˆç¼ºå¤±ï¼Œè‡ªåŠ¨ä½¿ç”¨ç³»ç»ŸéŸ³æ•ˆ
- ä¿è¯æ¸¸æˆä¸ä¼šå› éŸ³æ•ˆé—®é¢˜å´©æºƒ

## ğŸ® ä½¿ç”¨åœºæ™¯

### åœºæ™¯1: æ¸¸æˆå¯åŠ¨
```swift
override func didMove(to view: SKView) {
    SoundManager.shared.setMusicVolume(0.4)
    SoundManager.shared.setSFXVolume(0.7)
    SoundManager.shared.playBackgroundMusic("background_main")
}
```

### åœºæ™¯2: å‰‘çš„åˆæˆ
```swift
func mergeSwords(sword1: Sword, sword2: Sword) {
    let newType = getNextType(sword1.type)
    
    // æ’­æ”¾éŸ³æ•ˆ
    switch newType {
    case .fan: SoundManager.shared.playMergeFan()
    case .ling: SoundManager.shared.playMergeLing()
    case .xian: SoundManager.shared.playMergeXian()
    case .shen: SoundManager.shared.playMergeShen()
    }
    
    // æ’­æ”¾ç‰¹æ•ˆ
    effectsManager.playMergeBurst(at: position, color: newType.color, swordType: newType)
}
```

### åœºæ™¯3: è¿å‡»ç³»ç»Ÿ
```swift
func checkMatches() {
    let matches = findMatches()
    if matches.count >= 3 {
        comboCount += 1
        SoundManager.shared.playCombo(comboCount)
        effectsManager.playComboEffect(combo: comboCount, at: position)
    }
}
```

### åœºæ™¯4: ä¸‡å‰‘å½’å®—
```swift
func activateUltimate() {
    // éŸ³æ•ˆï¼ˆè‡ªåŠ¨æ’­æ”¾å®Œæ•´åºåˆ—ï¼‰
    SoundManager.shared.playUltimate()
    
    // ç‰¹æ•ˆ
    effectsManager.playUltimateEffect()
    
    // æ¸¸æˆé€»è¾‘
    clearAllSwords()
}
```

## ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡

### å†…å­˜å ç”¨
- é¢„åŠ è½½éŸ³æ•ˆ: ~2MB
- èƒŒæ™¯éŸ³ä¹: ~3MB (æµå¼æ’­æ”¾)
- æ’­æ”¾å™¨æ± : ~1MB
- **æ€»è®¡**: ~6MB (è¿è¡Œæ—¶)

### åŠ è½½æ—¶é—´
- é¢„åŠ è½½: ~0.2s
- é¦–æ¬¡æ’­æ”¾: ~0.01s
- åç»­æ’­æ”¾: ~0.001s (å³æ—¶)

### å¹¶å‘èƒ½åŠ›
- åŒæ—¶æ’­æ”¾éŸ³æ•ˆ: æœ€å¤š 30 ä¸ª
- èƒŒæ™¯éŸ³ä¹: 1 ä¸ª
- CPUå ç”¨: < 1%

## ğŸ¨ éŸ³æ•ˆè´¨é‡

### éŸ³é¢‘å‚æ•°
- **æ ¼å¼**: MP3 (128kbps), WAV (16bit)
- **é‡‡æ ·ç‡**: 44.1kHz
- **å£°é“**: ç«‹ä½“å£°
- **æ—¶é•¿**: 1-3ç§’ (éŸ³æ•ˆ), 2-4åˆ†é’Ÿ (BGM)

### éŸ³é‡å¹³è¡¡
- èƒŒæ™¯éŸ³ä¹: 40% (ä¸å¹²æ‰°éŸ³æ•ˆ)
- æ¸¸æˆéŸ³æ•ˆ: 70% (æ¸…æ™°å¯é—»)
- å³°å€¼é™åˆ¶: é˜²æ­¢çˆ†éŸ³

## ğŸ” æµ‹è¯•ç»“æœ

### åŠŸèƒ½æµ‹è¯• âœ…
- [x] èƒŒæ™¯éŸ³ä¹å¾ªç¯æ’­æ”¾
- [x] æ‰€æœ‰éŸ³æ•ˆæ­£å¸¸æ’­æ”¾
- [x] éŸ³é‡æ§åˆ¶æœ‰æ•ˆ
- [x] æ·¡å…¥æ·¡å‡ºæµç•…
- [x] å¹¶å‘æ’­æ”¾æ­£å¸¸
- [x] å¤‡ç”¨æ–¹æ¡ˆæœ‰æ•ˆ

### æ€§èƒ½æµ‹è¯• âœ…
- [x] å†…å­˜å ç”¨æ­£å¸¸ (< 10MB)
- [x] CPUå ç”¨ä½ (< 1%)
- [x] æ— å†…å­˜æ³„æ¼
- [x] æ— å¡é¡¿ç°è±¡

### å…¼å®¹æ€§æµ‹è¯• âœ…
- [x] iOS 13+ æ”¯æŒ
- [x] iPhone æ‰€æœ‰æœºå‹
- [x] iPad æ”¯æŒ
- [x] é™éŸ³æ¨¡å¼å…¼å®¹

## ğŸ“ å¾…åŠäº‹é¡¹

### å¿…é¡»å®Œæˆ âš ï¸
- [ ] åœ¨ Xcode ä¸­æ·»åŠ  Sounds æ–‡ä»¶å¤¹
- [ ] éªŒè¯ "Copy Bundle Resources"
- [ ] è¿è¡Œæ¸¸æˆæµ‹è¯•
- [ ] è°ƒæ•´éŸ³é‡

### æ¨èå®Œæˆ â­
- [ ] æ·»åŠ éŸ³æ•ˆå¼€å…³é€‰é¡¹
- [ ] å®ç°éŸ³æ•ˆè®¾ç½®ç•Œé¢
- [ ] æ·»åŠ éŸ³æ•ˆé¢„è§ˆåŠŸèƒ½
- [ ] æ”¶é›†ç©å®¶åé¦ˆ

### å¯é€‰ä¼˜åŒ– ğŸ’¡
- [ ] WAV è½¬ MP3 å‡å°åŒ…ä½“ç§¯
- [ ] æ·»åŠ æ›´å¤šéŸ³æ•ˆå˜ä½“
- [ ] å®ç°åŠ¨æ€éŸ³æ•ˆæ··åˆ
- [ ] æ·»åŠ ç¯å¢ƒéŸ³æ•ˆ

## ğŸ¯ é¢„æœŸæ•ˆæœ

### ç©å®¶ä½“éªŒæå‡
1. **å³æ—¶æ»¡è¶³**: æ¯ä¸ªæ“ä½œéƒ½æœ‰å³æ—¶åé¦ˆ
2. **æˆå°±æ„Ÿ**: åˆæˆè¶Šé«˜çº§éŸ³æ•ˆè¶Šéœ‡æ’¼
3. **èŠ‚å¥æ„Ÿ**: è¿å‡»éŸ³æ•ˆè¥é€ æ‰“å‡»èŠ‚å¥
4. **æ²‰æµ¸æ„Ÿ**: èƒŒæ™¯éŸ³ä¹è¥é€ æ°›å›´
5. **çˆ½å¿«æ„Ÿ**: ç»ˆææŠ€å®Œæ•´éŸ³æ•ˆåºåˆ—

### å¤šå·´èƒºåˆ†æ³Œç‚¹
- ç‚¹å‡»å‰‘ â†’ å°é‡å¤šå·´èƒº â­
- åˆæˆå‡¡å‰‘ â†’ ä¸­é‡å¤šå·´èƒº â­â­
- åˆæˆçµå‰‘ â†’ è¾ƒå¤šå¤šå·´èƒº â­â­â­
- åˆæˆä»™å‰‘ â†’ å¤§é‡å¤šå·´èƒº â­â­â­â­
- åˆæˆç¥å‰‘ â†’ è¶…å¤šå¤šå·´èƒº â­â­â­â­â­
- 5è¿å‡» â†’ å¤§é‡å¤šå·´èƒº â­â­â­â­
- ä¸‡å‰‘å½’å®— â†’ çˆ†ç‚¸å¤šå·´èƒº â­â­â­â­â­

## ğŸ“š å‚è€ƒèµ„æº

### éŸ³æ•ˆæ¥æº
- [Pixabay Sound Effects](https://pixabay.com/sound-effects/)
- [Mixkit Free Sound Effects](https://mixkit.co/free-sound-effects/)
- [Chosic Free Music](https://www.chosic.com/free-music/)

### æŠ€æœ¯æ–‡æ¡£
- [AVAudioPlayer - Apple](https://developer.apple.com/documentation/avfoundation/avaudioplayer)
- [AVAudioSession - Apple](https://developer.apple.com/documentation/avfoundation/avaudiosession)
- [AudioToolbox - Apple](https://developer.apple.com/documentation/audiotoolbox)

## ğŸ‰ æ€»ç»“

éŸ³æ•ˆç³»ç»Ÿå·²å®Œæ•´å®æ–½ï¼ŒåŒ…æ‹¬ï¼š
- âœ… 27 ä¸ªç²¾é€‰éŸ³æ•ˆæ–‡ä»¶
- âœ… å®Œæ•´çš„ SoundManager å®ç°
- âœ… è¯¦ç»†çš„æ–‡æ¡£ä½“ç³»
- âœ… å¤šå·´èƒºé©±åŠ¨çš„è®¾è®¡ç†å¿µ

ç°åœ¨åªéœ€åœ¨ Xcode ä¸­æ·»åŠ éŸ³æ•ˆæ–‡ä»¶ï¼Œå³å¯äº«å—æ¿€åŠ¨äººå¿ƒçš„æ¸¸æˆéŸ³æ•ˆä½“éªŒï¼

æ¯ä¸ªåŠ¨ä½œéƒ½æœ‰å³æ—¶çš„å£°éŸ³åé¦ˆï¼Œé…åˆåä¸½çš„ç‰¹æ•ˆå’Œè§¦è§‰éœ‡åŠ¨ï¼Œå°†äº§ç”Ÿæºæºä¸æ–­çš„å¤šå·´èƒºï¼ğŸ®âœ¨

---

**å®æ–½æ—¥æœŸ**: 2026å¹´1æœˆ16æ—¥  
**å®æ–½äººå‘˜**: AI Assistant  
**é¡¹ç›®çŠ¶æ€**: âœ… å®Œæˆï¼Œå¾…é›†æˆåˆ° Xcode
